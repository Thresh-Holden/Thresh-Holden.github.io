<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>附件一、UML符号与面向对象的设计 - 3D游戏编程与设计 - 中山大学</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="潘茂林" /><meta name="description" content="工欲善其事，必先利其器 &amp;mdash; 孔子 《论语》 1、什么是 UML？ Unified Modeling Language（统一建模语言）是一种标准的图形化编程语言用于软件分析与设计结果的" /><meta name="keywords" content="中山大学, 数据科学与计算机, 3D游戏编程与设计" />






<meta name="generator" content="Hugo 0.101.0 with theme even" />


<link rel="canonical" href="http://Thresh-Holden.github.io/post/x1-uml-notation/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.32d4dc642fec98c34c80bebb9c784c50771712b4a8a25d9f4dd9cce3534b426e.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="附件一、UML符号与面向对象的设计" />
<meta property="og:description" content="工欲善其事，必先利其器 &mdash; 孔子 《论语》 1、什么是 UML？ Unified Modeling Language（统一建模语言）是一种标准的图形化编程语言用于软件分析与设计结果的" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://Thresh-Holden.github.io/post/x1-uml-notation/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-09-05T00:00:00+08:00" />
<meta property="article:modified_time" content="2020-08-30T00:00:00+08:00" />

<meta itemprop="name" content="附件一、UML符号与面向对象的设计">
<meta itemprop="description" content="工欲善其事，必先利其器 &mdash; 孔子 《论语》 1、什么是 UML？ Unified Modeling Language（统一建模语言）是一种标准的图形化编程语言用于软件分析与设计结果的"><meta itemprop="datePublished" content="2020-09-05T00:00:00+08:00" />
<meta itemprop="dateModified" content="2020-08-30T00:00:00+08:00" />
<meta itemprop="wordCount" content="3335">
<meta itemprop="keywords" content="附件,UML," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="附件一、UML符号与面向对象的设计"/>
<meta name="twitter:description" content="工欲善其事，必先利其器 &mdash; 孔子 《论语》 1、什么是 UML？ Unified Modeling Language（统一建模语言）是一种标准的图形化编程语言用于软件分析与设计结果的"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">3D游戏编程与设计</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/post/index-2020">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">3D游戏编程与设计</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/post/index-2020">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">附件一、UML符号与面向对象的设计</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-09-05 </span>
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1什么是-uml">1、什么是 UML？</a></li>
        <li><a href="#2uml-绘图工具">2、UML 绘图工具？</a></li>
        <li><a href="#3设计类图基础符号与含义">3、设计类图基础符号与含义</a>
          <ul>
            <li><a href="#31-类">3.1 类</a></li>
            <li><a href="#32-类之间关系">3.2 类之间关系</a></li>
            <li><a href="#33-接口">3.3 接口</a></li>
            <li><a href="#34-属性">3.4 属性</a></li>
            <li><a href="#35-操作方法事件句柄">3.5 操作/方法/事件句柄</a></li>
            <li><a href="#36-构造型stereotype">3.6 构造型(stereotype)</a></li>
            <li><a href="#37-属性字符串property-string">3.7 属性字符串（property string）</a></li>
          </ul>
        </li>
        <li><a href="#4-综合案例">4 综合案例</a>
          <ul>
            <li><a href="#41-设计目标">4.1 设计目标</a></li>
            <li><a href="#42-设计方案">4.2 设计方案</a></li>
            <li><a href="#43-对应代码实现">4.3 对应代码实现</a></li>
          </ul>
        </li>
        <li><a href="#35-小结">3.5 小结</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <blockquote>
<p><strong><em>工欲善其事，必先利其器</em></strong></p>
<p>&mdash; 孔子 《论语》</p>
</blockquote>
<h2 id="1什么是-uml">1、什么是 UML？</h2>
<p>Unified Modeling Language（统一建模语言）是一种标准的图形化编程语言用于软件分析与设计结果的可视化。</p>
<p>本文主要用于描述游戏程序的设计的原理，主要用于类图设计，作用是：</p>
<ul>
<li>表达游戏程序关键结构的设计，方便程序员快速理解程序</li>
<li>解释设计模式在游戏中的应用，帮助理解游戏设计场景与设计模式的关系</li>
<li>陈述游戏设计要求，指导读者按设计者要求编写程序</li>
</ul>
<p>很多人觉得设计模式难学，关键问题之一就是不了解 <strong>UML 符号体系</strong>，如同学高等数学，缺乏对公式的符号体系的理解，对问题模型自然就萌萌擦了。其次 UML 符号表达的 <strong>代码逻辑</strong>，毕竟它是编程语言。编程实践经验这时就非常重要！</p>
<h2 id="2uml-绘图工具">2、UML 绘图工具？</h2>
<p>作为程序员，我们总喜欢与文本界面打交道。所以推荐：</p>
<ul>
<li><a href="http://umlet.com/">Umlet</a>
<ul>
<li>简单而有效的设计草图绘制工具，敏捷开发首选建模工具。</li>
<li>图形模板，文本驱动，没有太多的语法约束</li>
</ul>
</li>
<li><a href="http://plantuml.com/sequence-diagram">PlantUML</a>
<ul>
<li>文本驱动绘制工具</li>
<li><a href="http://www.plantuml.com/plantuml/uml/">在线制作</a></li>
</ul>
</li>
<li><a href="https://www.processon.com">ProcessOn</a>
<ul>
<li>万能的在线绘图与分享工具，只能画出个意思，专业就算了!</li>
<li>胜在在线</li>
</ul>
</li>
</ul>
<p>注：本文 UML 图使用 Umlet 绘制</p>
<h2 id="3设计类图基础符号与含义">3、设计类图基础符号与含义</h2>
<h3 id="31-类">3.1 类</h3>
<p>在 UML 中，设计类用三线表表示。其中第一栏是类名、第二栏属性、第三栏是方法。用户也可以自己扩充第四栏，描述类的职责等。</p>
<p>作为草图工具，追求高效率的沟通设计思想。 <strong>只表达与领域问题相关的属性和方法</strong>，而不是类API的说明，图示三种符号都是合格的类表示：</p>
<p><img src="../images/x1/class-notations.png" alt="class notation"></p>
<p>在 Umlet 中，为了得到（c）类图，仅需要选择一个类到绘图区，在属性区输入文本：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">GameObject
</span></span><span class="line"><span class="cl">-
</span></span><span class="line"><span class="cl">/activeInHierarchy
</span></span><span class="line"><span class="cl">+transform
</span></span><span class="line"><span class="cl">+tag
</span></span><span class="line"><span class="cl">-
</span></span><span class="line"><span class="cl">+GetComponent...(...)
</span></span><span class="line"><span class="cl">SendMessage(...)
</span></span><span class="line"><span class="cl">Find()
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="32-类之间关系">3.2 类之间关系</h3>
<p>在类设计阶段，类之间仅有四种关系：</p>
<p><img src="../images/x1/class-relationship-notation.png" alt="class-relationship"></p>
<p>分别表示：</p>
<ul>
<li>类继承</li>
<li>接口实现</li>
<li>实例使用</li>
<li>依赖</li>
</ul>
<p>使用类图之间的关系，可以帮助我们快速理解 Unity 游戏实体构建的通用模型：</p>
<p><img src="../images/x1/gameobject-component.png" alt="gameobject-component"></p>
<p>这个图反映了 Untity 游戏实体管理的基本概念。每个游戏对象是一个基本实体，这个实体是 Camera？ Light？ Or 3D model 由这个实体包含的 Components 决定。例如：相机对象包含 Camera 相关组件。</p>
<p>GameObject 包含一个 Components 集合，所以 GameObject 必然包含一组方法管理这些不同类型的 Components。 每个表示这个事实，UML 使用 <strong>多重性</strong> 表示这种关系。</p>
<p>其中，箭头表示拥有指向对象的实例，多重性表示<strong>实例数量约束</strong>。在 Umlet 中这样设置线的属性：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">lt=&lt;-
</span></span><span class="line"><span class="cl">m1=1..*
</span></span><span class="line"><span class="cl">m2=1
</span></span></code></pre></td></tr></table>
</div>
</div><p>其中 lt 表示线型，m1,m2分别表示线段两个端点的多重性。</p>
<p>GameObject 与 Transform 对象之间是 <strong>1 对 1 互相引用</strong> 紧耦合关系。即 GameObject 对象必须有一个非空 transform 实例变量，Transform 对象必须对应有非空 gameObject 实例变量。这个强制的约束也决定了 Transform 的超然地位，因为 Transform 的 parent 属性决定了 GameObject 之间的空间组合关系，使用 Component 访问 transform 比访问 gameObject 方便和实用。</p>
<p>最后，MonoBehaviour 是一个处理 GameObject 行为和事件的对象。它们是一个特殊的 Component，由游戏引擎调度管理。</p>
<h3 id="33-接口">3.3 接口</h3>
<p>接口是一种抽象数据类型，描述具有相同操作定义集合的对象。</p>
<p>例如：电影有许多场景构成，每个场景都有一个角色负责部署场景需要的各种资源部署，但导演并不知道每个场景由什么样的人承担这个角色，更不知道场景实现的细节。假设我们用 ISceneManager 定义这个角色拥有的操作，在具体场景中，导演仅需要被告知承担这个角色的对象（不是类），就可以对它下达布置场景等命令，从而实现了命令与执行的分离。UML 可用以下符号表示这样的程序结构：</p>
<p><img src="../images/x1/interface-notation.png" alt="interface-notation"></p>
<p>上图中，(a) 与 （b）具有相同的含义。（a） 运用 UML 关键字 interface 申明这个三线表是接口，所以第二栏定义为方法申明。(b) 是接口的套接字形式，说明场景控制器提供 ISceneManager 申明的服务， Director 使用服务。这样我们把业务逻辑不同类的对象，都看作接口类型的实例使用。</p>
<p>特别的，由于游戏人机交互规则通常在不同关卡都是一样的，使用 IUserAction 这样的接口描述人机交互规则，可以更好的理解并组织游戏的对象</p>
<h3 id="34-属性">3.4 属性</h3>
<p>类属性的完整表达形式是：</p>
<p><em>visibility name : type multiplicity = default {property-string}</em></p>
<p>属性分为两个大类</p>
<ul>
<li>类实例</li>
<li>值类型属性</li>
</ul>
<p><strong>类实例作为属性</strong>，以下三种形式是等价的：</p>
<p><img src="../images/x1/attribute-notaions.png" alt="attribute-notations"></p>
<p>都表示 GameObject 有 tranform 对象作为实例。在用关联线表示法时图（b）（c），多重性表示它是否是集合类型，例如：GameObject 使用 Component 对象的实例集合作为属性。</p>
<p>图（b）关联线在 Umlet 中的属性是：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">lt=&lt;-
</span></span><span class="line"><span class="cl">r1=transform
</span></span><span class="line"><span class="cl">m1=1
</span></span></code></pre></td></tr></table>
</div>
</div><p>r1 表示线段端点1的 role，表示类 act as，即属性名称。</p>
<p><strong>值类型作为属性</strong>，常见的值有：</p>
<ul>
<li>逻辑值（Bool）</li>
<li>数字值（Integer，Float，Double）</li>
<li>文字值（String）</li>
<li>日期值（Date）</li>
</ul>
<p><strong>设计图中的属性</strong></p>
<p>软件设计图类似伪代码编程，通常不会严格按属性表达式书写。这导致了许多专业 UML 工具的痛。例如：isActive 或 Active 属性，写不写它的类型呢？实践中设计师都不关注，因为每个类都有申明，你可以去看代码或生成的 API 文档</p>
<p>可见性：通常缺省表示公有。“-”表示私有，“/”表示计算属性，“+”公有</p>
<p><strong>为什么要使用关联线作为属性</strong></p>
<p>就是让读者抓住重点！</p>
<h3 id="35-操作方法事件句柄">3.5 操作/方法/事件句柄</h3>
<p>操作（Operations）表示抽象类型的运算符。例如，操作 “add” 与 “+” 是具有相同的语义运算。 操作的语法：</p>
<p><em>visibility name (parameter-list) : return-type {property-string}</em></p>
<p>方法（Methods）在 UML 中表示操作的代码实现。在非严格要求环境下，一般不区别 Operations 和 Methods。都认为是方法的申明。</p>
<p>在软件类图设计时，通常只写一个操作名称，参数、参数类型、返回都不写，这仅表明设计者认为这些细节在这里不重要而已。所以以下表示都是正确的：</p>
<ul>
<li>GetComponent</li>
<li>public Component GetComponent(Type type);</li>
</ul>
<p>事件句柄（Events handler）表示被回调（callback）的操作的实现。通常用 OnXXX(&hellip;) 表示。</p>
<h3 id="36-构造型stereotype">3.6 构造型(stereotype)</h3>
<p>构造型(stereotype)用于定义一个 UML 符号的细化类型及语义。它用书名号表示，例如 &lt;&lt;interface&gt;&gt; 它重新定义了类的符号。</p>
<p>常见的类的构造型有 &lt;&lt;singleton&gt;&gt; 表示单实例类，&lt;&lt;resource&gt;&gt; 或 &lt;&lt;prefab&gt;&gt; 表示序列化状态的类，&lt;&lt;listener&gt;&gt; 表示在设计模式中，该类的角色是侦听者等等</p>
<p>关联线也可以使用构造型再定义或细化。例如：&lt;&lt;create&gt;&gt; 或 &lt;&lt;generate&gt;&gt; 让你一看就知道对象要创建一个实例。</p>
<h3 id="37-属性字符串property-string">3.7 属性字符串（property string）</h3>
<p>类名、属性、方法都是 UML 类符号（类元）的属性。UML使用一组 “key=value” 的形式定义这些属性的含义，叫属性字符串。例如：</p>
<ul>
<li>{visibility=public，name=GetComponent，returnType=Component}</li>
<li>GetComponent</li>
<li>public GetComponent : Component</li>
<li>GetComponent {returnType=Component}</li>
</ul>
<p>以上形式的 UML 方法表示具有相同语义。</p>
<p>属性字符串通常对现有属性进一步修饰或限定。例如对类名、方法给与 {abstract}，读者就明白这是抽象的。对方法使用 {leaf} 表示不可重写的，作用于类就是不可继承的。</p>
<h2 id="4-综合案例">4 综合案例</h2>
<h3 id="41-设计目标">4.1 设计目标</h3>
<p>利用 MVC 思想，使得游戏结构更加清晰。</p>
<p>程序主要包括导演、场景经理、人机交互三个类。</p>
<ul>
<li>使用单实例实现了导演对象，负责游戏全局设定、场景管理等工作</li>
<li>使得用户视图与游戏场景模型的逻辑分离，即 MVC 的框架，场景经理实现游戏模型管理与游戏逻辑的实现</li>
<li>由 IUserAction 描述游戏规则对应操作</li>
<li>建立统一的场景控制接口，支持不同场景不同的业务逻辑</li>
</ul>
<h3 id="42-设计方案">4.2 设计方案</h3>
<p><img src="../images/ch03/mvc-priests-devils.png" alt="mvc"></p>
<h3 id="43-对应代码实现">4.3 对应代码实现</h3>
<p>ISceneController 接口的脚本文件 ISceneController.cs</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cs" data-lang="cs"><span class="line"><span class="cl"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// Abstact Scene Controller. Interface between scene controllers and the director</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span> <span class="k">interface</span> <span class="nc">ISceneController</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">void</span> <span class="n">LoadResources</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>FirstController.cs</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cs" data-lang="cs"><span class="line"><span class="cl"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// Scene Controller</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// Usage: host on a gameobject in the scene   </span>
</span></span><span class="line"><span class="cl"><span class="cs">/// responsiablities:</span>
</span></span><span class="line"><span class="cl"><span class="cs">///   acted as a scene manager for scheduling actors.log something ...</span>
</span></span><span class="line"><span class="cl"><span class="cs">///   interact with the director and players</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span> <span class="k">class</span> <span class="nc">FirstController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span><span class="p">,</span> <span class="n">ISceneController</span><span class="p">,</span> <span class="n">IUserAction</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// the first scripts</span>
</span></span><span class="line"><span class="cl">    <span class="k">void</span> <span class="n">Awake</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">SSDirector</span> <span class="n">director</span> <span class="p">=</span> <span class="n">SSDirector</span><span class="p">.</span><span class="n">getInstance</span> <span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">director</span><span class="p">.</span><span class="n">setFPS</span> <span class="p">(</span><span class="m">60</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">director</span><span class="p">.</span><span class="n">currentSceneController</span> <span class="p">=</span> <span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">director</span><span class="p">.</span><span class="n">currentSceneController</span><span class="p">.</span><span class="n">LoadResources</span> <span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">     
</span></span><span class="line"><span class="cl">    <span class="c1">// loading resources for the first scence</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">void</span> <span class="n">LoadResources</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">GameObject</span> <span class="n">sunset</span> <span class="p">=</span> <span class="n">Instantiate</span><span class="p">&lt;</span><span class="n">GameObject</span><span class="p">&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                                <span class="n">Resources</span><span class="p">.</span><span class="n">Load</span> <span class="p">&lt;</span><span class="n">GameObject</span><span class="p">&gt;</span> <span class="p">(</span><span class="s">&#34;prefabs/sun&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                                <span class="n">Vector3</span><span class="p">.</span><span class="n">zero</span><span class="p">,</span> <span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">sunset</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="s">&#34;sunset&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">Debug</span><span class="p">.</span><span class="n">Log</span> <span class="p">(</span><span class="s">&#34;load sunset ...\n&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cp">#region IUserAction implementation</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">void</span> <span class="n">GameOver</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">SSDirector</span><span class="p">.</span><span class="n">getInstance</span> <span class="p">().</span><span class="n">NextScene</span> <span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="err">#</span><span class="n">endregion</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Use this for initialization</span>
</span></span><span class="line"><span class="cl">    <span class="k">void</span> <span class="n">Start</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//give advice first</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// Update is called once per frame</span>
</span></span><span class="line"><span class="cl">    <span class="k">void</span> <span class="n">Update</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//give advice first</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>导演类的代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cs" data-lang="cs"><span class="line"><span class="cl"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span> <span class="k">class</span> <span class="nc">SSDirector</span> <span class="p">:</span> <span class="n">System</span><span class="p">.</span><span class="n">Object</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// singlton instance</span>
</span></span><span class="line"><span class="cl">    <span class="k">private</span> <span class="k">static</span> <span class="n">SSDirector</span> <span class="n">_instance</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="n">ISceneController</span> <span class="n">currentSceneController</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// https://blog.csdn.net/qiaoquan3/article/details/51339242</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="kt">bool</span> <span class="n">Paused</span> <span class="p">{</span> <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Time</span><span class="p">.</span><span class="n">timeScale</span> <span class="p">==</span> <span class="m">0</span><span class="p">;</span> <span class="p">}</span> <span class="k">set</span> <span class="p">{</span><span class="n">Time</span><span class="p">.</span><span class="n">timeScale</span> <span class="p">=</span> <span class="k">value</span><span class="p">?</span><span class="m">0</span><span class="p">:</span><span class="m">1</span><span class="p">;}</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// get instance anytime anywhare!</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">static</span> <span class="n">SSDirector</span> <span class="n">getInstance</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">_instance</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">_instance</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SSDirector</span> <span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">_instance</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="kt">int</span> <span class="n">getFPS</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Application</span><span class="p">.</span><span class="n">targetFrameRate</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">void</span> <span class="n">setFPS</span><span class="p">(</span><span class="kt">int</span> <span class="n">fps</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Application</span><span class="p">.</span><span class="n">targetFrameRate</span> <span class="p">=</span> <span class="n">fps</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">void</span> <span class="n">NextScene</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">Debug</span><span class="p">.</span><span class="n">Log</span> <span class="p">(</span><span class="s">&#34;Waiting next Scene now...&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#if UNITY_EDITOR  </span>
</span></span><span class="line"><span class="cl">        <span class="n">UnityEditor</span><span class="p">.</span><span class="n">EditorApplication</span><span class="p">.</span><span class="n">isPlaying</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//UnityEditor.EditorApplication.Exit(0);</span>
</span></span><span class="line"><span class="cl">        <span class="cp">#else  </span>
</span></span><span class="line"><span class="cl">        <span class="n">Application</span><span class="p">.</span><span class="n">Quit</span><span class="p">();</span>  
</span></span><span class="line"><span class="cl">        <span class="cp">#endif  </span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="35-小结">3.5 小结</h2>
<p><strong>UML符号体系</strong></p>
<p>作为可以描述任何语言的语言与符号系统。即严格定义的 UML 图可自动生成程序，也可由程序逆工程到 UML 图。因此，UML 存在复杂的语法与语义。</p>
<p>UML在设计实践中使用的符号通常比较简单，上述内容基本可以满足课程需要。</p>
<p>但UML符号体系是严密与复杂的，深入研究需要花费大量时间。</p>
<p><strong>UML作为设计思想表达工作</strong></p>
<ul>
<li>尽可能使用基本的符号</li>
<li>突出设计要点，忽略细节</li>
<li>能有效指导编码</li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">潘茂林</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2020-08-30
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/%E9%99%84%E4%BB%B6/">附件</a>
          <a href="/tags/uml/">UML</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/02-dscrete-simulation-basic/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">二、离散仿真引擎基础</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/x3-07-method-extend-lambda/">
            <span class="next-text nav-default">附录 X3-07、方法扩展、Lambda 表达式</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:panml@mail.sysu.edu.cn" class="iconfont icon-email" title="email"></a>
  <a href="http://Thresh-Holden.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2018 - 
    2022
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">潘茂林</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.1c70606d1b733282f06230615f5561b5894924b6f9930ba2ab99cf1254f75a1a.js"></script>








</body>
</html>
